{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"GitOps - Cluster Jo3","text":"<p>Welcome to the documentation for the Jo3 Kubernetes cluster. This repository serves as the source of truth for the GitOps-based deployment strategy managed by ArgoCD.</p>"},{"location":"#objective","title":"\ud83d\udccc Objective","text":"<p>To implement a complete GitOps strategy for the Jo3 cluster, centralizing all definitions of applications, resources, and Kubernetes infrastructure in a versioned, reliable, and traceable repository.</p>"},{"location":"#stack","title":"\ud83d\ude80 Stack","text":"<ul> <li>ArgoCD \u2013 GitOps deployment tool</li> <li>Kustomize \u2013 Kubernetes configuration management</li> <li>Helm \u2013 Application templates</li> <li>Kubernetes \u2013 Target cluster (Jo3)</li> <li>Git \u2013 Source of truth (private repository)</li> <li>ArgoCD App of Apps \u2013 Model for deployment hierarchization</li> </ul>"},{"location":"#gitops-flow","title":"\ud83d\udd01 GitOps Flow","text":"<ol> <li>Commit: You push a commit to this repository.</li> <li>Detect: ArgoCD automatically detects changes.</li> <li>Sync: The Jo3 cluster applies updates with full traceability.</li> </ol>"},{"location":"#security","title":"\ud83d\udd10 Security","text":"<p>This repository is private. Secrets are externalized via: - External Secrets (synced from Vault) - Sealed Secrets - HashiCorp Vault for secure storage.</p>"},{"location":"#maintainer","title":"\ud83d\udc64 Maintainer","text":"<p>Maintained by Joseph ZACHARIE. Contact: <code>joseph@zacharie.org</code></p>"},{"location":"architecture/","title":"Architecture","text":"<p>This section details the high-level architecture and service dependencies of the Jo3 cluster.</p>"},{"location":"architecture/#service-dependency-map","title":"Service Dependency Map","text":"<p>The following diagram illustrates the relationships between the core infrastructure, observability stack, productivity tools, and AI services.</p> <pre><code>graph TD\n    %% Core Infrastructure\n    Ingress[Traefik Ingress] --&gt; Apps\n    Vault[Vault] --&gt;|Secrets| Apps\n    PostgresPrd[(Postgres PRD)] --&gt; Keycloak\n    PostgresPrd --&gt; Docspell\n    PostgresPrd --&gt; Outline\n    PostgresPrd --&gt; Grafana\n\n    %% Observability\n    InfluxDB[(InfluxDB)] --&gt; GrafanaSBX\n    Prometheus[Prometheus] --&gt; GrafanaSBX\n    Loki[Loki] --&gt; GrafanaSBX\n    OpenObserve[OpenObserve/Zinc] --&gt; GrafanaSBX\n\n    %% AI Stack\n    Ollama[Ollama] --&gt; OpenWebUI\n    Ollama --&gt; LobeChat\n\n    %% Productivity\n    Redis[(Redis)] --&gt; Paperless\n    Redis --&gt; Outline\n\n    subgraph \"Observability\"\n        GrafanaSBX[Grafana SBX]\n        InfluxDB\n        Prometheus\n        Loki\n        OpenObserve\n        Gatus\n    end\n\n    subgraph \"Productivity\"\n        Paperless\n        Docspell\n        Outline\n        Planka\n    end\n\n    subgraph \"Security\"\n        Keycloak\n        Vault\n    end</code></pre>"},{"location":"architecture/#infrastructure-components","title":"Infrastructure Components","text":"<ul> <li>Traefik Ingress: Entry point for all HTTP/HTTPS traffic.</li> <li>HashiCorp Vault: Central secret management.</li> <li>PostgreSQL: Primary relational database for most applications.</li> <li>Redis: Caching layer for Paperless and Outline.</li> </ul>"},{"location":"applications/ai/","title":"AI Services","text":"<p>Artificial Intelligence and Machine Learning workloads running on the cluster.</p>"},{"location":"applications/ai/#ollama","title":"Ollama","text":"<ul> <li>Access: Internal Service</li> <li>Description: Backend for running Large Language Models (LLMs) locally.</li> <li>Hardware: Relies on GPU-enabled nodes for inference.</li> </ul>"},{"location":"applications/ai/#open-webui","title":"Open WebUI","text":"<ul> <li>URL: <code>open-webui.p.zacharie.org</code></li> <li>Description: Comprehensive user interface for interacting with LLMs hosted by Ollama. Supports chat history, multiple models, and more.</li> </ul>"},{"location":"applications/ai/#lobechat","title":"LobeChat","text":"<ul> <li>Description: Modern chat interface for LLMs, capable of connecting to the local Ollama instance.</li> </ul>"},{"location":"applications/media/","title":"Media Services","text":"<p>Entertainment and media streaming services.</p>"},{"location":"applications/media/#jellyfin","title":"Jellyfin","text":"<ul> <li>URL: <code>jellyfin-prd.p.zacharie.org</code></li> <li>Description: Media system for organizing and streaming movies, shows, and music.</li> <li>Storage: Mounts large PVCs/NFS shares for media content.</li> </ul>"},{"location":"applications/media/#audiobookshelf","title":"Audiobookshelf","text":"<ul> <li>URL: <code>audiobookshelf.p.zacharie.org</code></li> <li>Description: Self-hosted audiobook and podcast server.</li> </ul>"},{"location":"applications/observability/","title":"Observability Applications","text":"<p>This section outlines the observability stack deployed on the Jo3 cluster.</p>"},{"location":"applications/observability/#grafana-sbx","title":"Grafana SBX","text":"<ul> <li>URL: <code>grafana-sbx.p.zacharie.org</code></li> <li>Description: Central dashboarding platform for visualizing metrics and logs.</li> <li>Data Sources:<ul> <li>Prometheus (Metrics)</li> <li>InfluxDB (Sensor data)</li> <li>Loki (Logs)</li> <li>OpenObserve (Alternative Logs)</li> <li>PostgreSQL (Application performance data)</li> </ul> </li> </ul>"},{"location":"applications/observability/#influxdb-2","title":"InfluxDB 2","text":"<ul> <li>Internal URL: <code>192.168.0.115:8086</code></li> <li>Description: Time-series database primarily used for IoT and sensor data storage.</li> </ul>"},{"location":"applications/observability/#openobserve-zinc","title":"OpenObserve (Zinc)","text":"<ul> <li>URL: <code>o2-openobserve.p.zacharie.org</code></li> <li>Description: Lightweight observability platform for logs, metrics, and traces.</li> <li>Dependencies: <ul> <li>PostgreSQL (Metadata)</li> <li>S3 (Data Storage)</li> </ul> </li> </ul>"},{"location":"applications/observability/#gatus","title":"Gatus","text":"<ul> <li>URL: <code>gatus.p.zacharie.org</code></li> <li>Description: Automated service health dashboard. Performs periodic HTTP/TCP health checks against internal and external endpoints.</li> </ul>"},{"location":"applications/productivity/","title":"Productivity Applications","text":"<p>Tools and services for personal and professional productivity.</p>"},{"location":"applications/productivity/#paperless-ngx","title":"Paperless-ngx","text":"<ul> <li>URL: <code>paperless.p.zacharie.org</code></li> <li>Description: Document management system for archiving scanned documents.</li> <li>Dependencies:<ul> <li>PostgreSQL</li> <li>Redis</li> <li>Tika &amp; Gotenberg (Content extraction)</li> </ul> </li> </ul>"},{"location":"applications/productivity/#outline","title":"Outline","text":"<ul> <li>URL: <code>outline.p.zacharie.org</code></li> <li>Description: Knowledge base and wiki for internal documentation.</li> <li>Authentication: OIDC via Keycloak.</li> <li>Storage: MinIO (S3-compatible) for file uploads.</li> </ul>"},{"location":"applications/productivity/#planka","title":"Planka","text":"<ul> <li>URL: <code>planka.p.zacharie.org</code></li> <li>Description: Kanban board for task management, similar to Trello.</li> </ul>"},{"location":"applications/productivity/#docspell","title":"Docspell","text":"<ul> <li>Access: Internal / Ingress</li> <li>Description: Personal document organizer and archive.</li> </ul>"},{"location":"applications/security/","title":"Security &amp; Infrastructure","text":"<p>Core security and identity management services.</p>"},{"location":"applications/security/#hashicorp-vault","title":"HashiCorp Vault","text":"<ul> <li>URL: <code>vault.p.zacharie.org</code></li> <li>Description: Secrets management, encryption as a service, and identity management.</li> <li>Role: Stores all sensitive credentials (database passwords, API keys) which are synced to Kubernetes Secrets via External Secrets Operator.</li> </ul>"},{"location":"applications/security/#keycloak","title":"Keycloak","text":"<ul> <li>URL: <code>keycloak.p.zacharie.org</code></li> <li>Description: Identity and Access Management (IAM).</li> <li>Role: Provides Single Sign-On (SSO) via OIDC for applications like Outline, Grafana, and potentially others.</li> </ul>"},{"location":"applications/security/#trivy-operator","title":"Trivy Operator","text":"<ul> <li>Description: Continuous security scanning for Kubernetes. Scans container images for vulnerabilities and checks configuration issues.</li> </ul>"},{"location":"infrastructure/nodes/","title":"Nodes &amp; Hardware","text":"<p>The Jo3 cluster is composed of multiple nodes, likely a mix of physical and virtual machines managed via Proxmox.</p>"},{"location":"infrastructure/nodes/#node-topology","title":"Node Topology","text":"<p>[!NOTE] Specific node details (CPU, RAM, IP) are managed dynamically.</p> <ul> <li>Control Plane: Manages the Kubernetes API, Scheduler, and Controllers.</li> <li>Worker Nodes: Run the actual workloads.</li> <li>GPU Nodes: Dedicated nodes (e.g., <code>vm169</code>) equipped with NVIDIA GPUs for AI workloads like Ollama and Whisper.</li> </ul>"},{"location":"infrastructure/nodes/#operating-system","title":"Operating System","text":"<p>Nodes typically run a Linux distribution optimized for Kubernetes (e.g., Talos, Ubuntu with K3s/RKE2).</p>"},{"location":"infrastructure/storage/","title":"Storage","text":"<p>Persistent storage is a critical component for stateful applications in Jo3.</p>"},{"location":"infrastructure/storage/#storage-classes","title":"Storage Classes","text":"<ul> <li>proxmox-aquabot-bpool-xfs-i:<ul> <li>Type: CSI Driver for Proxmox / ZFS / Local Storage.</li> <li>Usage: High-performance storage for Databases (Postgres, InfluxDB).</li> </ul> </li> <li>nfs-client:<ul> <li>Usage: Shared storage for media (Jellyfin, Audiobookshelf) and \"ReadWriteMany\" PVCs.</li> </ul> </li> </ul>"},{"location":"infrastructure/storage/#backups","title":"Backups","text":"<p>Backups are likely handled by Velero or dedicated application-level backups (e.g., Postgres dumps to S3).</p>"}]}